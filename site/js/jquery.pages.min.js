// Copyright (c) Cody Scott 2013.
// https://github.com/cs475x
// https://twitter.com/cs475x
//
// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
(function(e,t,n,r){e.pages=function(){var r=this;var i;var s=n.title;r.init=function(){r.linkCreate();r.linkClick();var n=e("div[data-page-index=true]").first();i=n.length?n:e("div[data-page-id][data-page-title]").first();var s=e("div[data-page-id="+t.location.hash+"]").length?t.location.hash:i.data("page-id");r.pageShow(s)};r.linkCreate=function(){var t={};e("div[data-page-id^=#]").each(function(){var n=e(this).data("page-id");var r=e(this).data("page-title");if(t[n])return true;else t[n]=true;if(!r)return true;e("ul.page-nav").append(e("<li/>").append(e("<a/>").append(r).attr("data-page-id",n).addClass("page-link").attr("style","cursor:pointer")))})};r.linkClick=function(){e("a.page-link").click(function(){var t=e(this).data("page-id");var n=e("div[data-page-id="+t+"]");if(n){r.pageShow(t)}return false})};r.pageShow=function(r){if(!r)return false;var o=e("div[data-page-id="+r+"]")||i;if(o){t.location.hash=r;e("div[data-page-id]").hide();e("[data-page-external]").hide();o.first().show();e("[data-page-external="+r+"]").show();var u=t[o.first().data("page-function")||r.substring(1,r.length)];if(typeof u==="function"){u()}e("a.page-link").parent().removeClass("active");e("a[data-page-id="+r+"]").parent().addClass("active");n.title=e(o).data("page-title")+" Â· "+s}};r.init()};e.fn.pages=function(){return this.each(function(){new e.pages(this)})}})(jQuery,window,document)